<?php
/**
 * Copyright Â© 28Software (https://28software.com)
 * See LICENSE for the license details.
 */
declare(strict_types = 1);

use TESoftware\BuySafeGuarantee\ViewModel\Tracker;

/** @var \Magento\Checkout\Block\Onepage\Success $block */
/** @var Tracker $viewModel */

$viewModel = $block->getViewModel();
$incrementId = $block->getOrderId();
?>
<!-- Shopping Guarantee -->
<script type="text/javascript" src="<?= /** @noEscape */ $viewModel->getScriptUrl() ?>" ></script>
<script type="text/javascript" >
    if( window._GUARANTEE && _GUARANTEE.Loaded ) {
        _GUARANTEE.Guarantee.order = "<?= /** @noEscape */ $incrementId ?>";
        _GUARANTEE.Guarantee.subtotal = "<?= /** @noEscape */ $viewModel->getOrderSubtotal($incrementId) ?>";
        _GUARANTEE.Guarantee.currency = "<?= /** @noEscape */ $viewModel->getOrderCurrencyCode($incrementId) ?>";
        _GUARANTEE.Guarantee.email = "<?= /** @noEscape */ $viewModel->getOrderCustomerEmail($incrementId) ?>";
        _GUARANTEE.WriteGuarantee();
    }
</script>
<!-- Shopping Guarantee -->
